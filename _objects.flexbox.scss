/*------------------------------------*\
    #FLEXBOX
\*------------------------------------*/

// Predefine the variables below in order to alter and enable specific features.
$inuit-flexbox-namespace:    $inuit-namespace !default;

$inuit-flexbox-spacing-unit: $inuit-base-spacing-unit !default;

//------------------------------------
// Mixins
//------------------------------------

@mixin flexbox() {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

@mixin flex($values) {
  -webkit-box-flex: $values;
  -moz-box-flex: $values;
  -webkit-flex: $values;
  -ms-flex: $values;
  flex: $values;
}

@mixin order($val) {
  -webkit-box-ordinal-group: $val;
  -moz-box-ordinal-group: $val;
  -ms-flex-order: $val;
  -webkit-order: $val;
  order: $val;
}

// Internally used mixin to quickly generate our different variants based upon
// the breakpoints defined in `settings.responsive`.

@mixin inuit-generate-responsive-item() {

    // Loop through our previously-defined breakpoints.
    @each $breakpoint in $breakpoints {

        $inuit-generate-responsive-item-alias:      nth($breakpoint, 1) !global;
        $inuit-generate-responsive-item-condition:  nth($breakpoint, 2);

        // This isn’t ideal, but we definitely don’t want to generate widths
        // for retina devices. Exclude retina media-qeuries manually.
        @if ($inuit-generate-responsive-item-alias != "retina") {

            @include media-query($inuit-generate-responsive-item-alias) {
                @content;
            } // Close media query.

        } // Close retina check.

        // Take the global variable back out of scope.
        $inuit-generate-responsive-item-alias: null !global;

    } // Close breakpoints loop.

}

/**
 * Row
 *
 * 1. Defines the default behaviour for how flex items are laid out along the
 *    cross axis on the current line. Item are aligned at the top. Items are
 *    aligned to the top.
 * 2. Defines the alignment along the main axis. Items are aligne on the left.
 */
.#{$inuit-flexbox-namespace}flex {
  @include flexbox();
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; /* [1] */
  justify-content: flex-start; /* [2] */
  margin-right: -$inuit-flexbox-spacing-unit;
  margin-left: -$inuit-flexbox-spacing-unit;
}

/**
 * Grid with flexible columns widths
 */
.flex--flex {
  $i: 1;
  @while $i <= 12 {
    .flex__item--#{$i} {
      @include flex($i);
      padding-right: $inuit-flexbox-spacing-unit;
      padding-left: $inuit-flexbox-spacing-unit;
    }
    $i: $i + 1;
  }
}

@include inuit-generate-responsive-item() {
  $i: 1;
  @while $i <= 12 {
    /**
     * Flexible item with a size of #{$i} for #{$inuit-generate-responsive-item-alias} viewport
     */
     .flex--flex {
       .#{$inuit-flexbox-namespace}flex__item--#{$inuit-generate-responsive-item-alias}--#{$i} {
          @include flex($i);
          padding-right: $inuit-flexbox-spacing-unit;
          padding-left: $inuit-flexbox-spacing-unit;
        }
      }
    $i: $i + 1;
  }
}


/**
 * 12 columns grid
 *
 * Items can be from 1 to 12 columns width
 */
.flex--fix {
  $i: 1;
  @while $i <= 12 {
    .flex__item--#{$i} {
      $flex-basis: 100/12*$i*1%;
      @include flex(0 1 $flex-basis);
      padding-right: $inuit-flexbox-spacing-unit;
      padding-left: $inuit-flexbox-spacing-unit;
    }
    $i: $i + 1;
  }
}

@include inuit-generate-responsive-item() {
  $i: 1;
  @while $i <= 12 {
    /**
     * Fixed item with a size of #{$i} for #{$inuit-generate-responsive-item-alias} viewport
     */
     .flex--fix {
       .#{$inuit-flexbox-namespace}flex__fix--#{$inuit-generate-responsive-item-alias}--#{$i} {
         $flex-basis: 100/12*$i*1%;
         @include flex(0 1 $flex-basis);
         padding-right: $inuit-flexbox-spacing-unit;
         padding-left: $inuit-flexbox-spacing-unit;
        }
      }
    $i: $i + 1;
  }
}
